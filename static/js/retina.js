(function(){function d(){}function k(a){return g.retinaImageSuffix+a}function e(a,b){this.path=a||"";if("undefined"!==typeof b&&null!==b)this.at_2x_path=b,this.perform_check=!1;else{if(void 0!==document.createElement){var c=document.createElement("a");c.href=this.path;c.pathname=c.pathname.replace(l,k);this.at_2x_path=c.href}else c=this.path.split("?"),c[0]=c[0].replace(l,k),this.at_2x_path=c.join("?");this.perform_check=!0}}function h(a){this.el=a;this.path=new e(this.el.getAttribute("src"),this.el.getAttribute("data-at2x"));
var b=this;this.path.check_2x_variant(function(a){a&&b.swap()})}var f="undefined"===typeof exports?window:exports,g={retinaImageSuffix:"@2x",check_mime_type:!0,force_original_dimensions:!0};f.Retina=d;d.configure=function(a){null===a&&(a={});for(var b in a)a.hasOwnProperty(b)&&(g[b]=a[b])};d.init=function(a){null===a&&(a=f);var b=a.onload||function(){};a.onload=function(){var a=document.getElementsByTagName("img"),f=[],e,d;for(e=0;e<a.length;e+=1)d=a[e],d.getAttributeNode("data-no-retina")||f.push(new h(d));
b()}};d.isRetina=function(){return 1<f.devicePixelRatio||f.matchMedia&&f.matchMedia("(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)").matches?!0:!1};var l=/\.\w+$/;f.RetinaImagePath=e;e.confirmed_paths=[];e.prototype.is_external=function(){return!(!this.path.match(/^https?\:/i)||this.path.match("//"+document.domain))};e.prototype.check_2x_variant=function(a){var b,c=this;if(this.is_external())return a(!1);if(this.perform_check||
"undefined"===typeof this.at_2x_path||null===this.at_2x_path){if(this.at_2x_path in e.confirmed_paths)return a(!0);b=new XMLHttpRequest;b.open("HEAD",this.at_2x_path);b.onreadystatechange=function(){if(4===b.readyState&&200<=b.status&&399>=b.status){if(g.check_mime_type){var d=b.getResponseHeader("Content-Type");if(null===d||!d.match(/^image/i))return a(!1)}e.confirmed_paths.push(c.at_2x_path);return a(!0)}return a(!1)};b.send()}else return a(!0)};f.RetinaImage=h;h.prototype.swap=function(a){function b(){c.el.complete?
(g.force_original_dimensions&&(c.el.setAttribute("width",c.el.offsetWidth),c.el.setAttribute("height",c.el.offsetHeight)),c.el.setAttribute("src",a)):setTimeout(b,5)}"undefined"===typeof a&&(a=this.path.at_2x_path);var c=this;b()};d.isRetina()&&d.init(f)})();
